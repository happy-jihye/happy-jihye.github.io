---
title: "Computer Graphics #02. Coordinate Space & Transformations "
excerpt: " "


categories:
 - vision
tags:
  - computer-graphcis
  - vision
search: true

# ëª©ì°¨
toc: true  
toc_sticky: true 

use_math: true
---


> **About Computer Graphics..** 
> 
> Geometry, rendering, animation, imaging, Materials & lighting, VR/AR, mobile GPU, deep learning


- ê¹€ì˜ë¯¼ êµìˆ˜ë‹˜ì˜ ì»´í“¨í„° ê·¸ë˜í”½ìŠ¤ ìˆ˜ì—…ì„ ë“£ê³  ìš”ì•½í•œ ê¸€ì…ë‹ˆë‹¤.

---

# 3. Coordinate Space & Transformations (1)



<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-1.png?raw=1' width = '800' ></p>

## <span style='background-color: #E5EBF7;'> 3.1 Transformation </span>

### linear transformation

<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-2.png?raw=1' width = '350' ></p>
<font color='gray'><i><p align='center' style='font-size:9px'> linear transformation </p></i></font>

- **linear transformation**
  - cheap to compute

$$f(\mathbf{x}+\mathbf{y})=f(\mathbf{x})+f(\mathbf{y})$$

$$f(a \mathbf{x})=a f(\mathbf{x})$$

| scale | 
|--|
<img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-3.jpg?raw=1' width = '800' > |

| rotation | 
|--|
<img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-29.jpg?raw=1' width = '800' > |

| reflection | shear | 
|--|--|
|<img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-5.png?raw=1' width = '600' > |<img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-6.png?raw=1' width = '600' > |

- **scaleê³¼ rotation, reflection, shearëŠ” linear transformation**


### translation

| translation | 
|--|
<img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-4.png?raw=1' width = '800' > |


- **translationì€ linear transformationê°€ ì•„ë‹˜ !**
  - `affine transformation`: linear transformation + translation
  - scalingí•˜ê³  translationí•œ ê²ƒê³¼ translationí•˜ê³  scalingí•˜ëŠ” ê±´ ë‹¤ë¦„ 
    => linear transformation X

**Summary**
<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-7.png?raw=1' width = '800' ></p>

---

## <span style='background-color: #E5EBF7;'> 3.2 Matrix multiplication </span>

### linear transformation

<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-8.jpeg?raw=1' width = '700' ></p>

<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-9.jpeg?raw=1' width = '800' ></p>


### Homogenous coordinate

- `Homogenous coordinate`: 2D pointsë¥¼ 3 valueë¡œ í‘œí˜„
  - 3ë²ˆì§¸ extra coordinateë¡œ ë‚˜ë¨¸ì§€ 2D coordinateë¥¼ ë‚˜ëˆ ì£¼ë©´ ë‹¤ì‹œ 2Dë¡œ í‘œí˜„ ê°€ëŠ¥

> ğŸ§ Homogenous Coordinateë¥¼ ì™œ ì‚¬ìš©í• ê¹Œ?
>
> ìš°ë¦¬ëŠ” Homogenous Coordinateì„ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ translationì´ë‚˜ perspective projectionê³¼ ê°™ì€ non-linear transformationì„ matrix ì—°ì‚°ì´ ê°€ëŠ¥í•œ linear transformationìœ¼ë¡œ ë°”ê¿€ ìˆ˜ ìˆë‹¤. ëŒ€ì‹  ì°¨ì›ì´ í•˜ë‚˜ ëŠ˜ì–´ë‚œë‹¤.

**Scaling & Rotation**
<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-13.png?raw=1' width = '600' ></p>

**Translation**


<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-12.png?raw=1' width = '600' ></p>
<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-11.jpeg?raw=1' width = '600' ></p>

> homogenous coordinateë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ translationì„ *linear* transformationìœ¼ë¡œ ë³¼ ìˆ˜ ìˆìŒ !

- 2D-homogenous spaceì—ì„œëŠ” translationì´ shear transformation ì²˜ëŸ¼ ë³´ì„
- 2D-H points ì—ì„œ $w=0$ ì´ë©´ 2D vectorê°€ ë¨ (infiniteë‹ˆê¹Œ)
  - vectorëŠ” translationì˜ ì˜í–¥ì„ ë°›ì§€ ì•ŠìŒ

### 2D transformation in 2D-H

<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-14.png?raw=1' width = '600' ></p>

---

### 3D transformation in 3D-H


<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-15.png?raw=1' width = '700' ></p>


- `3D-H` ì—­ì‹œ ë§ˆì°¬ê°€ì§€, `4x4 matrix`ë¡œ í‘œí˜„ë¨
- openGLì´ë‚˜ GPUëŠ” `4x4 matrix`ë¥¼ ì˜í•˜ë„ë¡ ìµœì í™”ê°€ ë˜ì–´ìˆìŒ
- 3Dì—ì„œëŠ” rotationì„ ì¡°ì‹¬í•  í•„ìš”ê°€ ìˆìŒ. 2Dì—ì„œëŠ” rotation ìˆœì„œê°€ ì¤‘ìš”í•˜ì§€ ì•Šì•˜ì§€ë§Œ, 3Dì—ì„œëŠ” ì¤‘ìš”
  - **eular angle**: `Gimbal lock` ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆìŒ 
  - 3D rotationì—ëŠ” `Axis-angle rotation`ì´ë‚˜ `Quaternions` ë“±ì˜ ë°©ì‹ì„ ì‚¬ìš©

---

## <span style='background-color: #E5EBF7;'> 3.3 Chain </span>

<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-1.png?raw=1' width = '600' ></p>

- Transformationì€ ë¬¼ì²´ë¥¼ ì˜®ê²¼ë‹¤ê³  ìƒê°í•  ìˆ˜ë„ ìˆì§€ë§Œ, coordinate systemì´ ë°”ê¼ˆë‹¤ê³  ìƒê°í•  ìˆ˜ë„ ìˆìŒ
- `World coord`ì—ì„œ `View coord`ìœ¼ë¡œ ì˜®ê¸¸ ë•ŒëŠ” rotationê³¼ translationì„ í†µí•´ coordinateë¥¼ ë°”ê¿”ì¤Œ

<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-16.png?raw=1' width = '800' ></p>

<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-17.png?raw=1' width = '800' ></p>

ì‚¬ëŒì„ ë§Œë“¤ ë•Œ hierarchicalí•˜ê²Œ ê·¸ë£¹ì„ ì ¸ì„œ ë§Œë“¦

---
# 4. Coordinate Space & Transformations (2)

## <span style='background-color: #E5EBF7;'> 4.1 Transformation </span>

### Homogenous Coordinate

- `N-dim`ì˜ coordinateê°€ ìˆì„ ë•Œ ì´ë¥¼ `N+1`ë¡œ í‘œí˜„í•˜ëŠ” ê²ƒ
- `2D` [ë°ì¹´ë¥´íŠ¸ ì¢Œí‘œê³„(Cartesian coordinate)](https://en.wikipedia.org/wiki/Cartesian_coordinate_system) $(X, Y)$ â†’ `2D` [Homogeneous coordinate](https://en.wikipedia.org/wiki/Homogeneous_coordinates) $(x, y, w)$ 
- Why homogeneous?
  - scale invarientí•˜ê¸° ë•Œë¬¸
  - $(1a, 2a, 3a) \rightarrow (1/3, 2/3)$
  - $(0,0,0)$ì€ í‘œí˜„ì´ ì•ˆë¨
  - ì›ì ì„ ì œì™¸í•˜ê³  ì •ì˜í•œ 2D projective space $P^2 = R^3 - (0,0,0)$

<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-18.jpeg?raw=1' width = '600' ></p>

<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-19.png?raw=1' width = '800' ></p>

---

### 2D transformatioin

<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-20.png?raw=1' width = '600' ></p>

- `Translation`: ë¬¼ì²´ê°€ ëª¨ì–‘ì„ ìœ ì§€í•˜ë©° ì›€ì§ì´ëŠ” ê±°
- `Euclidean`: Translation + Rotation, ëª¨ì–‘ì€ ê·¸ëŒ€ë¡œ
- `Similarity`: Translation + Rotation + Uniform scaling
- `Affine`: ë¬¼ì²´ì˜ ëª¨ì–‘ì´ ì•½ê°„ ì°Œê·¸ëŸ¬ì§
- `Projective`: ê¸¸ì´ì˜ ë¹„ìœ¨ì´ ë³€í•¨


<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-21.jpeg?raw=1' width = '800' ></p>


---

## <span style='background-color: #E5EBF7;'> 4.2 Perspective Projection </span>

<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-22.jpeg?raw=1' width = '800' ></p>

### [View frustum](https://docs.unity3d.com/kr/530/Manual/UnderstandingFrustum.html)

<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-23.png?raw=1' width = '600' ></p>

- ì¹´ë©”ë¼ì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” ì˜ì—­

---

### Clipping

<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-24.png?raw=1' width = '600' ></p>

- ì¹´ë©”ë¼ì—ì„œ ì•ˆë³´ì´ëŠ” ë¶€ë¶„ì— í•´ë‹¹í•˜ëŠ” ì‚¼ê°í˜•ì€ ë²„ë¦¬ëŠ” ê²ƒ
- clippingì„ í•˜ëŠ” ê³¼ì •ì—ì„œ ì‚¬ìš©í•˜ëŠ” computationì´ ë§ì•„ì§€ë©´ (ê°ê°ì˜ ë¬¼ì²´ë“¤ì´ Insideì¸ì§€ outsideì¸ì§€ ê³„ì‚°í•˜ëŠ”ë° ë“œëŠ” cost) ì˜¤íˆë ¤ clippingì„ í•´ì„œ ì–»ëŠ” ì´ì ì´ ì ì–´ì§€ë¯€ë¡œ ì—¬ëŸ¬ê°€ì§€ choiceë¥¼ í•˜ê²Œ ë¨

**near/far plane clipping**

<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-25.png?raw=1' width = '600' ></p>

- ì–´ë–¤ ë¬¼ì²´ê°€ ë„ˆë¬´ ê°€ê¹Œì´ì— ìˆê±°ë‚˜ ë„ˆë¬´ ë©€ë¦¬ ìˆìœ¼ë©´ ë³´ì´ì§€ ì•ŠìŒ â¡ ì• ì´ˆì— ë„ˆë¬´ ê°€ê¹ê±°ë‚˜ ë¨¼ ì˜ì—­ì— ëŒ€í•´ì„œëŠ” ë¯¸ë¦¬ clipping 

**frustum to normalized cube**

<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-26.png?raw=1' width = '600' ></p>

- ã…ì‚¬ë‹¤ë¦¬ê¼´ ëª¨ì–‘ì˜ viewing frustumì„ ê³„ì‚°í•˜ê¸° í¸í•œ normalized cubeë¡œ ì˜®ê¸°ë©´ clippingì„ ë” ê°„ë‹¨í•˜ê²Œ í•  ìˆ˜ ìˆìŒ 
  - [-1, 1] ì˜ outside ì˜ì—­ì— ìˆëŠ”ê±´ ë²„ë¦¬ë©´ ë˜ë‹ˆê¹Œ
- ì›ì ì— ê°€ê¹Œìš´ ê²½ìš°ì—ëŠ” near clippingì„ í•¨ìœ¼ë¡œì¨ precision issueë¥¼ í”¼í•  ìˆ˜ ìˆìŒ
- ì´ë ‡ê²Œ nomarlized cubeë¡œ ì˜®ê¸°ëŠ” ê±°ë¥¼ `NDC(Normarlized Device Coordinate)`ë¼ê³  ë¶€ë¦„

**Clipping in NDC(Normarlized Device Coordinate)**

<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-27.png?raw=1' width = '600' ></p>

**perspective transform**

<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-28.png?raw=1' width = '600' ></p>

- [ê´€ë ¨ ì¦ëª…](http://www.songho.ca/opengl/gl_projectionmatrix.html)

---

## <span style='background-color: #E5EBF7;'> 4.3 Rotations in 3D </span>

- [scale, shear, translationê³¼ ê°™ì€ 3D transformation](https://happy-jihye.github.io/computer%20graphics/cg-2/#3d-transformation-in-3d-h)ì™€ ë‹¬ë¦¬ 3D rotationì€ ì•½ê°„ ë³µì¡í•¨

<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-30.jpg?raw=1' width = '600' ></p>

- Rotation matrix
- Euler angles
- Axis/angle
- Quaternion 
ë“±ì˜ ë°©ì‹ìœ¼ë¡œ 3D rotationì„ í‘œí˜„í•  ìˆ˜ ìˆìŒ

- ì°¸ê³ í• ë§Œí•œ ê¸€
  - [[ìœ ë‹ˆí‹°] Euler, Quaternion ì˜¤ì¼ëŸ¬ê° ì¿¼í„°ë‹ˆì–¸ ì´ ì •ë¦¬](https://hub1234.tistory.com/21)

---

### [Eular angle](https://en.wikipedia.org/wiki/Euler_angles)
- $(x, y, z)$, ì„¸ ì¶•ìœ¼ë¡œ ê°ê° ì–¼ë§ˆë‚˜ ëŒì•„ê°”ëŠ”ì§€ë¥¼ í‘œì‹œí•˜ëŠ” ë°©ë²•
  - 3ì¶•ì€ orthogonal í•´ì•¼í•˜ëŠ”ë°, ì—¬ëŸ¬ê°€ì§€ rotationì— ë”°ë¼ coordinate systemì´ ë³€í™”í•˜ê²Œ ë˜ë©´ì„œ ì¶•ê°„ì˜ independenceê°€ ë³´ì¥ì´ ì•ˆë  ë•Œë„ ìˆìŒ 

- [Gimbal lock](https://en.wikipedia.org/wiki/Gimbal_lock) ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ë„

| Eular angle | Gimbal lock | 
|--|--|
|<img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-31.jpg?raw=1' width = '600' > |<img src='https://upload.wikimedia.org/wikipedia/commons/4/49/Gimbal_Lock_Plane.gif?raw=1' width = '600' > |

---

### 3D rotation group

> 3D rotationì€ Special orthogonal groupì´ì lie group !
>
> - Euclidean distance(isometry)ì™€ orientation(handedness of space)ë¥¼ ë³´ì¡´í•˜ì§€ë§Œ, ìˆœì„œë¥¼ ë°”ê¿€ ìˆ˜ëŠ” ì—†ìŒ

- [Group](https://en.wikipedia.org/wiki/Group_(mathematics)): ì–´ë–¤ set $G$ ê³¼ operationì´ group ê´€ê³„ë¥¼ í˜•ì„±í•˜ë ¤ë©´ ë„¤ê°€ì§€ ì¡°ê±´ì„ ë§Œì¡±í•´ì•¼í•¨
  1. Closure
  2. Associativity
  3. Identity element
  4. Inverse element

  - ì˜ˆë¥¼ ë“¤ì–´, ì •ìˆ˜ì™€ ë§ì…ˆì€ ê·¸ë£¹ì„

- [Orthogonal Group](https://en.wikipedia.org/wiki/Orthogonal_group): Euclidean spaceì—ì„œ ê¸¸ì´ê°€ ë°”ë€Œì§€ ì•Šì€ transformationë“¤ (distance-preserving transformations)
  - transformationì„ matrixë¡œ í‘œí˜„í–ˆì„ ë•Œ, í•´ë‹¹ í–‰ë ¬ì´ `n x n`ì˜ orthogonal matrices ì´ë©´, orthogonal transformationì´ ë˜ëŠ” ê²ƒ
  - **Special orthogonal group** $SO(n)$ : Orthogonal Groupì—ì„œë„ orthogonal matricesì˜ determinantê°€ 1ì¸ ê·¸ë£¹

- [Lie Group](https://en.wikipedia.org/wiki/Lie_group): ë¯¸ë¶„ì´ ê°€ëŠ¥í•œ differential manifoldì— ì¡´ì¬í•˜ëŠ” operation

- ì°¸ê³ í• ë§Œí•œ ê¸€
  - [Lie Theory ê°œë… ì •ë¦¬](https://edward0im.github.io/mathematics/2020/05/01/lie-theory/)
  - [Lie Groups, Lie Algebras](https://elementary-physics.tistory.com/84)

### Axis/Angle
<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-33.jpg?raw=1' width = '600' ></p>

**Rodriquez's formula**
<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-32.png?raw=1' width = '600' ></p>

- $\theta$ ê°€ ì‘ìœ¼ë©´ $sin \theta$ ë¥¼ $\theta$ ë¡œ ê·¼ì‚¬í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ linear í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŒ 

**Exponential Twist**

- ìœ„ì˜ ì‹ì„ ë‹¤ìŒê³¼ ê°™ì´ë„ ìœ ë„í•  ìˆ˜ ìˆìŒ

<p align='center'><img src='https://github.com/happy-jihye/happy-jihye.github.io/blob/master/_posts/images/GP/gp3-34.jpg?raw=1' width = '600' ></p>


---

**Reference**

- [CMU: COMPUTER GRAPHICS](http://15462.courses.cs.cmu.edu/fall2015/home)
- 2020 ê¹€ì˜ë¯¼ êµìˆ˜ë‹˜ ê·¸ë˜í”½ìŠ¤ í”„ë¡œê·¸ë˜ë° ê°•ì˜ìë£Œ